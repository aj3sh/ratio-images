<!DOCTYPE html>
<html>
<head>
	<title>Ratio Images</title>
	<meta charset="utf-8">

	<!-- Bootstrap css cdn -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
	
	<style>
		/* RATIO IMAGES CSS */
		.ratio-image{
			position: relative;
			width: 100%;
			height: 0px;
			padding-bottom: 100%;
		}

		.ratio-16-9{
			padding-bottom: 56.25%;	/* 9/16 * 100% */
		}

		.ratio-image img{
			position: absolute;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.ratio-image.ratio-lazy img{
			visibility: hidden;
		}
    </style>

</head>
<body>

	<div class="container" style="margin-top: 40px;">
		<div class="row">
			<div class="col-md-4">
				Image 1
				<div class="ratio-image ratio-16-9">
					<img src="https://cdn.pixabay.com/photo/2015/07/08/03/18/water-pump-835344__340.jpg">
				</div>
			</div>
			<div class="col-md-4">
				Image 2
				<div class="ratio-image ratio-16-9 ratio-lazy">
					<img data-src="https://images.pexels.com/photos/104827/cat-pet-animal-domestic-104827.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500">
				</div>
			</div>
			<div class="col-md-4">
				Image 3
				<div class="ratio-image ratio-16-9">
					<img src="https://cdn.pixabay.com/photo/2015/07/08/03/18/water-pump-835344__340.jpg">
				</div>
			</div>
		</div>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
		<div class="row">
			<div class="col-md-4">
				Image 1
				<div class="ratio-image ratio-16-9">
					<img src="https://cdn.pixabay.com/photo/2015/07/08/03/18/water-pump-835344__340.jpg">
				</div>
			</div>
			<div class="col-md-4">
				Image 2
				<div class="ratio-image ratio-16-9 ratio-lazy">
					<img data-src="https://images.pexels.com/photos/617278/pexels-photo-617278.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500">
				</div>
			</div>
			<div class="col-md-4">
				Image 3
				<div class="ratio-image ratio-16-9">
					<img src="https://cdn.pixabay.com/photo/2015/07/08/03/18/water-pump-835344__340.jpg">
				</div>
			</div>
		</div>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
		<div class="row">
			<div class="col-md-4">
				Image 1
				<div class="ratio-image ratio-16-9">
					<img src="https://cdn.pixabay.com/photo/2015/07/08/03/18/water-pump-835344__340.jpg">
				</div>
			</div>
			<div class="col-md-4">
				Image 2
				<div class="ratio-image ratio-16-9 ratio-lazy">
					<img data-src="https://www.petmd.com/sites/default/files/what-does-it-mean-when-cat-wags-tail.jpg">
				</div>
			</div>
			<div class="col-md-4">
				Image 3
				<div class="ratio-image ratio-16-9">
					<img src="https://cdn.pixabay.com/photo/2015/07/08/03/18/water-pump-835344__340.jpg">
				</div>
			</div>
		</div>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
		<div class="row">
			<div class="col-md-4">
				Image 4
				<div class="ratio-image ratio-16-9">
					<img src="https://cdn.pixabay.com/photo/2015/07/08/03/18/water-pump-835344__340.jpg">
				</div>
			</div>
			<div class="col-md-4">
				Image 5
				<div class="ratio-image ratio-16-9">
					<img src="https://cdn.pixabay.com/photo/2015/07/08/03/18/water-pump-835344__340.jpg">
				</div>
			</div>
			<div class="col-md-4">
				Image 6
				<div class="ratio-image ratio-16-9 ratio-lazy">
					<img data-src="https://www.nationalgeographic.com/content/dam/news/2018/05/17/you-can-train-your-cat/02-cat-training-NationalGeographic_1484324.jpg">
				</div>
			</div>
		</div>
	</div>

	<!-- Jquery cdn -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
	<!-- Bootstrap js cdn -->
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

	<!-- RATIO IMAGES LAZY script -->
	<script>
	/*	
	*	RATIO IMAGES LAZY script
	*	
	*	USAGE:
	* 	<div class="ratio-image ratio-16-9 ratio-lazy">
	*		<img data-src="myimage.jpg">
	*	</div>
	*
	*/

	!function(window){
		
		function loadImage($el, $fn) {
			jQuery($el).attr('src', jQuery($el).attr('data-src')).css('visibility', 'visible');
			$fn ? $fn() : null;
		}
		
		function elementInViewport($el) {
			var $rect = $el.getBoundingClientRect();
			return ($rect.top >= 0 && $rect.left >= 0 && $rect.top <= (window.innerHeight || document.documentElement.clientHeight));
		}
		
		jQuery(document).ready(function() {
			
			var images = new Array()
			, query = jQuery('.ratio-image.ratio-lazy img')
			, processScroll = function() {
				let newImages = Array.from(images);
				jQuery.each(newImages, function(i, img) {
					if(img == undefined)
						return;
					
					if (elementInViewport(img)) {
						loadImage(img, function () {
							images.splice(images.indexOf(img), 1);
						});
					}
				});
			};
			
			query.each(function() {
				images.push(this);
			});
			
			processScroll();
			jQuery(window).bind('scroll', processScroll);
			
		});
		
	}(this);
	</script>

</body>
</html>